@model GuildUsersQueryModel
@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager

@{
    ViewData["Title"] = "StarCraft Page";

}
<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            background-image: url("/Img/sc/SC1.jpg");
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-size: 100% 100%;
        }

        img {
            border-radius: 50%;
        }

        .box {
            width: 235px;
            height: 115px;
            overflow: scroll;
        }

        .outBox {
            margin: 30px;
            /*border: 1px solid #ccc;*/
            /*float: left;*/
            width: 180px;
        }
    </style>
</head>

<body>
    <header>
    </header>

    <div class="position-relative relative">
        <nav class="navbar bg-body-tertiary position-absolute top-0 end-50">
            <div class="container-fluid">
                <form class="d-flex" role="search">
                    <input asp-for="SearchString" class="form-control me-2" type="search" placeholder="Search by Guild Name" aria-label="Search">
                    <button class="btn btn-info" type="submit">Search</button>
                </form>
            </div>
        </nav>

        @{
            int previousPage = Model.CurrentPage - 1;
            if (previousPage < 1)
            {
                previousPage = 1;
            }

            int maxPage = (int)Math.Ceiling((double)Model.GuildUsersCount /
            Model.UserPerPage);
        }

        <div class="row mb-5">
            <div class="col-md-6 d-grid gap-2 d-md-flex justify-content-md-start">
                <a class="btn btn-primary @(Model.CurrentPage == 1 ? "disabled" : string.Empty)"
                   asp-controller="Pages"
                   asp-action="StarCraft"
                   asp-route-currentPage="@previousPage"
                   asp-route-searchTerm="@Model.SearchString"><<</a>
            </div>

            @{
                bool shouldNextPageBeDisabled = Model.CurrentPage == maxPage ||
                !Model.GuildUsers.Any();
            }

            <div class="col-md-6 d-grid gap-2 d-md-flex justify-content-md-end">
                <a class="btn btn-primary
           @(shouldNextPageBeDisabled ? "disabled" : string.Empty)"
                   asp-controller="Pages"
                   asp-action="StarCraft"
                   asp-route-currentPage="@(Model.CurrentPage + 1)"
                   asp-route-searchTerm="@Model.SearchString">>></a>

            </div>
        </div>
    </div>

    <div class="position-relative">
        @{
            var userCount = 0;
        }
        @foreach (var user in Model.GuildUsers)
        {
            @if (SignInManager.IsSignedIn(User))
            {
                if (user.UserName == User.Identity!.Name)
                {
                    continue;
                }
            }
            userCount++;
            <div class="outBox">
                <partial name="_StarCraftGuildUsersPartial" model="@user" />
            </div>          
        }
        <div class="text-center  position-absolute top-0 end-0">
            @if (userCount == 0)
            {
                <div class="outBox">
                    <div class="card col-4" style="width: 12rem;">
                        <img src="/Img/WoW/WoW26.jpg" class="card-img-top" alt="...">
                        <div class="card-body">
                            <h5 class="card-title">Card title</h5>
                            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                            <a href="#" class="btn btn-primary">Go somewhere</a>
                        </div>
                    </div>
                </div>            
            }
            @if (userCount > 0)
            {
                <div class="outBox">
                    <div class="card col-4" style="width: 12rem;">
                        <img src="/Img/WoW/WoW23.jpg" class="card-img-top" alt="...">
                        <div class="card-body">
                            <h5 class="card-title">Card title</h5>
                            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                            <a href="#" class="btn btn-primary">Go somewhere</a>
                        </div>
                    </div>
                </div>             
            }
            @if (userCount > 1)
            {
                <div class="outBox">
                    <div class="card col-4" style="width: 12rem;">
                        <img src="/Img/WoW/WoW23.jpg" class="card-img-top" alt="...">
                        <div class="card-body">
                            <h5 class="card-title">Card title</h5>
                            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                            <a href="#" class="btn btn-primary">Go somewhere</a>
                        </div>
                    </div>
                </div>       
            }
            @if (userCount > 2)
            {
                <div class="outBox">
                    <div class="card col-4" style="width: 12rem;">
                        <img src="/Img/WoW/WoW23.jpg" class="card-img-top" alt="...">
                        <div class="card-body">
                            <h5 class="card-title">Card title</h5>
                            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                            <a href="#" class="btn btn-primary">Go somewhere</a>
                        </div>
                    </div>
                </div>         
            }
            @if (userCount > 3)
            {
                <div class="outBox">
                    <div class="card col-4" style="width: 12rem;">
                        <img src="/Img/WoW/WoW23.jpg" class="card-img-top" alt="...">
                        <div class="card-body">
                            <h5 class="card-title">Card title</h5>
                            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                            <a href="#" class="btn btn-primary">Go somewhere</a>
                        </div>
                    </div>
                </div>
            }
            @if (userCount > 4)
            {
                <div class="outBox">
                    <div class="card col-4" style="width: 12rem;">
                        <img src="/Img/WoW/WoW23.jpg" class="card-img-top" alt="...">
                        <div class="card-body">
                            <h5 class="card-title">Card title</h5>
                            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                            <a href="#" class="btn btn-primary">Go somewhere</a>
                        </div>
                    </div>
                </div>      
            }
            @if (userCount > 5)
            {
                <div class="outBox">
                    <div class="card col-4" style="width: 12rem;">
                        <img src="/Img/WoW/WoW23.jpg" class="card-img-top" alt="...">
                        <div class="card-body">
                            <h5 class="card-title">Card title</h5>
                            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                            <a href="#" class="btn btn-primary">Go somewhere</a>
                        </div>
                    </div>
                </div>    
            }
            @if (userCount > 6)
            {
                <div class="outBox">
                    <div class="card col-4" style="width: 12rem;">
                        <img src="/Img/WoW/WoW23.jpg" class="card-img-top" alt="...">
                        <div class="card-body">
                            <h5 class="card-title">Card title</h5>
                            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                            <a href="#" class="btn btn-primary">Go somewhere</a>
                        </div>
                    </div>
                </div>              
            }
            @if (userCount > 7)
            {
                <div class="outBox">
                    <div class="card col-4" style="width: 12rem;">
                        <img src="/Img/WoW/WoW23.jpg" class="card-img-top" alt="...">
                        <div class="card-body">
                            <h5 class="card-title">Card title</h5>
                            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                            <a href="#" class="btn btn-primary">Go somewhere</a>
                        </div>
                    </div>
                </div>       
            }
            @if (userCount > 8)
            {
                <div class="outBox">
                    <div class="card col-4" style="width: 12rem;">
                        <img src="/Img/WoW/WoW23.jpg" class="card-img-top" alt="...">
                        <div class="card-body">
                            <h5 class="card-title">Card title</h5>
                            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                            <a href="#" class="btn btn-primary">Go somewhere</a>
                        </div>
                    </div>
                </div>              
            }
        </div>
    </div>
</body>
</html>








